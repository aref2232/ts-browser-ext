<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Tailscale Browser Extension</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap" rel="stylesheet" />
    <script src="popup.js"></script>
    <style>
      body {
        font-family: "Inter", Arial, sans-serif;
        background: #f5f7fa;
        margin: 0;
        padding: 16px;
        width: 330px;
        color: #575655;
      }
      .card {
        background: #fff;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        padding: 18px;
        margin-bottom: 15px;
      }
      .status-row {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
      }
      .status-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #e53e3e;
        margin-right: 8px;
      }
      .status-dot.connected { background: #38a169; }
      .status-dot.loading { background: #d69e2e; animation: pulse 1s infinite; }
      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.6; }
        100% { opacity: 1; }
      }
      .section-title { font-weight: 500; margin-bottom: 8px; font-size: 16px; }
      .dropdown {
        width: 100%; padding: 6px; border-radius: 6px; border: 1px solid #ccc;
        background: #f8fafc; font-size: 14px;
      }
      .button-row { display: flex; gap: 8px; margin-top: 8px; }
      .btn {
        background: #4c78c6; color: #fff; border: none; border-radius: 6px; padding: 8px 16px;
        font-size: 14px; cursor: pointer; transition: background 0.15s;
      }
      .btn:disabled { background: #cbd5e1; cursor: not-allowed; }
      .alert { background: #ffe5e5; color: #c53030; border-radius: 6px; padding: 8px 12px; margin-bottom: 10px; }
      .desc { font-size: 13px; color: #636e7b; margin-top: 3px; }
      .exitnode-desc { font-size: 12px; color: #4c78c6; margin-top: 5px; }
      .hidden { display: none; }
      a { color: #4c78c6; text-decoration: none; }
      a:hover { text-decoration: underline; }

      /* DARK MODE SUPPORT */
      @media (prefers-color-scheme: dark) {
        body {
          background: #171923;
          color: #e2e8f0;
        }
        .card {
          background: #23263a;
          box-shadow: 0 2px 8px rgba(0,0,0,0.5);
        }
        .dropdown {
          background: #23263a;
          color: #e2e8f0;
          border: 1px solid #374151;
        }
        .btn {
          background: #3755b4;
          color: #e2e8f0;
        }
        .btn:disabled {
          background: #374151;
          color: #a0aec0;
        }
        .alert {
          background: #2d3748;
          color: #e53e3e;
        }
        .desc, .exitnode-desc {
          color: #a0aec0;
        }
        a, a:hover {
          color: #90cdf4;
        }
        .status-dot {
          background: #e53e3e;
        }
        .status-dot.connected { background: #48bb78; }
        .status-dot.loading { background: #d69e2e; }
      }
    </style>
  </head>
  <body>
    <div id="alertBox" class="alert hidden"></div>
    <div class="card">
      <div class="section-title">Connection</div>
      <div class="status-row">
        <span id="statusDot" class="status-dot"></span>
        <span id="stateText">Loading...</span>
      </div>
      <div id="tailnetInfo" class="desc"></div>
      <div class="button-row">
        <button id="toggleBtn" class="btn">Connect</button>
        <button id="settingsBtn" class="btn">Settings</button>
        <button id="domainSettingsBtn" class="btn" title="Configure domains for exit node">Domains</button>
      </div>
    </div>
    <div id="exitNodeCard" class="card hidden">
      <div class="section-title">Exit Node</div>
      <select id="exitNodeDropdown" class="dropdown"></select>
      <div id="exitNodeDesc" class="exitnode-desc hidden"></div>
    </div>
  </body>
</html>